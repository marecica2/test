#{extends 'main.html' /} 
#{set background:'true' /} 

#{set 'moreScripts'}
        <script src="@{'/public/javascripts/lib/simpleWebRtc.js'}" type="text/javascript" ></script>
#{/set}


<div class="container" style="padding:20px;">
<div class="shadow">
	<div class="row" style="border:0px solid silver;background:#efefef;border-top:15px solid #{if event && event.color} ${event.color} #{/if} #{else} #3A87AD #{/else};">
		<div class="col-md-8" style="padding:15px;background: white;">
			<img style="float:left;margin-right:15px" src="https://img.new.livestream.com/events/0000000000346a81/6391585d-f70e-414a-899e-f03aa8dcadee_170x255.jpg">
			<div>
				<div class="segoe" style="font-size:2em">${event.title}</div>
				<div style="color:black;font-size:1.0em">
		    	   <p>Conference event</p>
				   <p>
				   	   <strong>Date</strong><br/>
		   			   <span class="event-time-from" id="event-time-from">#{formatDate}${event.eventStart.getTime()}#{/formatDate}</span> 
					   <span class="event-time-to">#{formatTime}${event.eventStart.getTime()}#{/formatTime}</span> - 
		   			   <span class="event-time-from" id="event-time-from">#{formatDate}${event.eventStart.getTime()}#{/formatDate}</span> 
					   <span class="event-time-to">#{formatTime}${event.eventEnd.getTime()}#{/formatTime}</span>		
				   </p>	
				   <p>
				   		<strong>About</strong><br/>
		    	   		${event.description}
		    	   </p>
				   <p>
				   		<strong>Links</strong><br/>
		    	   		<a href="">Start streaming</a> |
		    	   		<a href="">View livestream</a>
		    	   </p>
				</div>
			</div>
		</div>
		<div class="col-md-4" style="padding:15px;height:100%">
			<h4>
				<a class="black" href="/public/user?id=${event.user.uuid}">${event.user.fullName}</a>
				<button class="btn btn-primary pull-right">Follow</button>
			</h4>
			<div class="clearfix"></div>
			<hr>
			<img class="img-thumbnail" src="${event.user.avatarUrl}" style="float:left;margin-right:10px;">
			<table class="table table-hover table-condensed" style="display:inline;width:100%">
			  <tr><td><a href="#" class="light"><strong class="black">32 222</strong> Followers</a></td></tr>
			  <tr><td><a href="#" class="light"><strong class="black">22</strong> Events</a></td></tr>
			  <tr><td><a href="#" class="light"><strong class="black">13</strong> Following</a></td></tr>
			</table>
		</div>
	</div>
	
	<div class="row" style="border:1px solid silver;border-top:1px solid silver;background:#fafafa;">
		<div class="col-md-8" style="border-right:1px solid silver;padding:10px">
			<button class="btn btn-default btn-sm"><i class="fa fa-thumbs-up"></i> Add vote</button>
			<button class="btn btn-default btn-sm"><i class="fa fa-heart"></i> Add to Favorites</button>
			<button class="btn btn-default btn-sm"> &lt;/&gt; Embed</button>
			<button class="btn btn-default btn-sm"><i class="fa fa-arrow-right"></i> Share</button>
		</div>
		<div class="col-md-4" style="padding:10px">
			<i class="fa fa-user"></i> 34 Watching now
		</div>
	</div>

	<div class="row" style="border:1px solid silver;background: white">
		<div class="col-md-8" style="padding:0px;">
			<object height="500" style="background:black;" type="application/x-shockwave-flash" id="applicationID" data="/public/images/downstream.swf">
			    <param name='src' value='/public/images/downstream.swf'/>
			    <param name="movie" value="https://fpdownload.adobe.com/strobe/FlashMediaPlayback.swf" />
				<param name=FlashVars value="myServerUrl=${rmtp}&myStreamName=${event.uuid}" />
				<param name="wmode" value="transparent" />
				<param name="allowFullScreen" value="true" />
				<param name="allowscriptaccess" value="always" />
				<param name="quality" value="high" />
				<param name="menu" value="false" />
			</object>		
		</div>
		<div class="col-md-4" style="background:#333;padding:10px;height:500px;">
			<div style="height:100%">
				<div id="content" class="form-control" style="background:#333;height:440px;color:white;overflow-y: scroll; border: 0px; margin-bottom:4px;"></div>
				<div class="controls">
					<form onsubmit="return false;">
						<div class="input-group">
							#{if !isPublic}
								<input id="chat-text" class="form-control"> <input id="chat-name" type="hidden" value="${name}"> 
							#{/if}
							#{if isPublic}
								<input id="chat-text" class="form-control"> <input id="chat-name" type="hidden" value="${name}"> 
							#{/if}
							<span class="input-group-btn">
								<button id="chat-send" class="btn btn-success">
									<i id="enable-video" class="fa fa-keyboard-o fa-1x"></i> &{'send'}
								</button>
							</span>
						</div>
					</form>
				</div>
			</div>
		</div>
	</div>
	
	<div class="row" style="border:1px solid silver;min-height:100vh;background: white">
		<!-- comments -->
		#{include 'comments.html' /}	
  	</div>
</div>
</div>


<script>
	var star = {}
    star.user = '${name}';
    star.room = '${room}';
    star.server_host = '${serverIp}:8888';
    star.livestream = true;
    star.peerId = null;
</script>
<script src="https://${serverIp}:8888/socket.io/socket.io.js"></script>
<script src="@{'/public/javascripts/room.js'}" type="text/javascript"></script>


