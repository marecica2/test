#{extends 'main.html' /} 
#{set background:'true' /} 
#{i18n /}

#{set 'moreStyles'}
        <style>
        	.bcg {
        		z-index: -10;
        		background: #444;
        	}
			.video-element {
				border: 3px solid rgba(0,0,0,0);
			}
			.body video {
				#transform: scale(1.4);
			}
        </style>
#{/set}
#{set 'moreScripts'}
        <!-- 
        <script src="@{'/public/javascripts/lib/simpleWebRtc.min.js'}" type="text/javascript" ></script>
        <script type="text/javascript" src="//api.filepicker.io/v1/filepicker.js"></script>
         -->
#{/set}

#{set 'moreHtml'}
#{/set}


<!-- Chat box -->
<!-- 
<div class="shadow" id="chat-container" style="background:#333;float:left;display:table-cell;vertical-align:middle;padding:15px;padding-left:25px;position:absolute;top:150px;right:-325px;width:350px;height:70%;">
	<span class="color-link-light" id="chat-slider" style="display:table-cell;vertical-align:middle;position:absolute;left:0px;height:82%;width:30px;font-size:0.8em">&nbsp;&nbsp;<i class="fa fa-chevron-left"></i></span>
	<div id="content" class="form-control transparent-black " style="color:white;height: 82%; overflow-y: scroll; border: 0px solid white;"></div>
	<div class="controls">
		<form role="form" onsubmit="return false;">
			<div class="input-group">
				<span class="input-group-btn">
				#{if !isPublic || customer}
					<button id="chat-upload" class="btn btn-`primary opacity" type="button" style="height:40px;">
						<i id="enable-video" class="fa fa-upload fa-1x"></i>
					</button>
				#{/if}
				</span>
				#{if !isPublic}
					<textarea id="chat-text" class="form-control transparent" style="height:40px;"></textarea> <input id="chat-name" type="hidden" value="${name}"> 
				#{/if}
				#{if isPublic}
					<textarea id="chat-text" class="form-control transparent" style="height:40px;"></textarea> <input id="chat-name" type="hidden" value="${name}"> 
				#{/if}
				<span class="input-group-btn">
					<button id="chat-send" class="btn btn-primary opacity" style="height:40px;">
						<i id="enable-video" class="fa fa-keyboard-o fa-1x"></i>
					</button>
				</span>
			</div>
		</form>
	</div>
</div>
 --> 


<div style="text-align:center;">
	<br/>
	<div id="controls">
		<span class="transparent-dark" style="display:inline-block;padding:5px;">
			<button type="button" id="controls-mute" class="opacity btn btn-default " ><i class="fa fa-microphone"></i></button>
			<button 			  id="screenShareButton" class="opacity btn btn-default btn-default "><i class="fa fa-desktop"></i></button>
			<button type="button" id="controls-switchauto" class="opacity btn btn-success " ><i class="fa fa-refresh"></i></button>
			<button type="button" id="controls-hangup" class="opacity btn btn-danger " ><i class="fa fa-phone"></i></button>
		</span>
	</div>
	
	<div style="width:100%; position:absolute;bottom:0px;text-align:center">
		<div id="remotes">
			<div class="videoContainer"><video id="localVideo" oncontextmenu="return false;"></video></div>
			<div id="localScreenContainer" class="videoContainer"></div>
		</div>
	</div>
</div>



<script>
	var star = {}
    star.user = '${name}';
    #{if user}
    	star.usr = {'uuid': '${user.uuid}', 'name': '${name}', 'skype': '${user.skype}', 'user': true, 'avatar': '${user.avatarUrl}'};
    	star.lang = "${user.locale}";	
    #{/if}
    star.livestream = false;
    star.peerId = null;
    star.room = '${room}';
    star.server_host = '${serverIp}:8888';
</script>
<script src="https://${serverIp}:8888/socket.io/socket.io.js"></script>
<script src="@{'/public/javascripts/lib/simpleWebRtc.js'}" type="text/javascript" ></script>
<script src="@{'/public/javascripts/room.js'}" type="text/javascript"></script>
<div class="clear"></div>
