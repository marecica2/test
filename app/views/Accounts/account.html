#{extends 'main.html' /} 
#{set switcher: true /}

#{set 'moreStyles'}
	<link rel="stylesheet" href="@{'/public/css/jquery.Jcrop.min.css'}" type="text/css" />
#{/set}

#{set 'moreScripts'}
	<script src="@{'/public/javascripts/starEvent.js'}" type="text/javascript"></script>
	<script>
		starCalendar.aspectRatio = 1;
	</script>

#{/set}


#{set 'moreHtml'}
	*{
	<!-- Color Switcher (Remove these lines) -->
	<script type="text/javascript" src="@{'/public/style-switcher/style-switcher.js'}"></script>
	<div class="style-switcher closed">
		<div class="header">
			<a class="trigger" href="#"><i class="icon-tools"></i></a>
			<h2>Style Switcher</h2>
		</div>
		<div class="clearfix body">
			<h3>Predifined Colors</h3>
			<ul class="styleChange">
				<li class="red selected" data-style="red" title="red"></li>
				<li class="blue" data-style="blue" title="blue"></li>
				<li class="green" data-style="green" title="green"></li>
				<li class="orange" data-style="orange" title="orange"></li>
				<li class="dark-gray" data-style="dark_gray" title="dark_gray"></li>
				<li class="pink" data-style="pink" title="pink"></li>
				<li class="purple" data-style="purple" title="purple"></li>
				<li class="dark-cyan" data-style="dark_cyan" title="dark_cyan"></li>
				<li class="yellow" data-style="yellow" title="yellow"></li>
				<li class="light-blue" data-style="light_blue" title="light_blue"></li>
				<li class="brown" data-style="brown" title="brown"></li>
				<li class="light-green" data-style="light_green" title="light_green"></li>
				<li class="dark-red" data-style="dark_red" title="dark_red"></li>
			</ul>
			<hr>
			<h3>Footer</h3>
			<ul class="footerChange">
				<li class="dark selected" data-style="dark" title="dark"><i class="fa fa-square-o"></i> Dark</li>
				<li class="light" data-style="light" title="light"><i class="fa fa-square-o"></i> Light</li>
			</ul>
			<hr>
			<h3>Layout Mode</h3>
			<ul class="layoutChange">
				<li class="wide selected" data-style="wide" title="wide"><i class="fa fa-arrow-left pr-10"></i>Wide<i class="fa fa-arrow-right pl-10"></i></li>
				<li class="boxed" data-style="boxed" title="boxed"><i class="fa fa-arrow-right pr-5"></i>Boxed<i class="fa fa-arrow-left pl-5"></i></li>
			</ul>
			<h3>Patterns</h3>
			<ul class="patternChange">
				<li class="pattern-0" data-style="pattern-0" title="white background"></li>
				<li class="pattern-1" data-style="pattern-1" title="pattern-1"></li>
				<li class="pattern-2" data-style="pattern-2" title="pattern-2"></li>
				<li class="pattern-3" data-style="pattern-3" title="pattern-3"></li>
				<li class="pattern-4" data-style="pattern-4" title="pattern-4"></li>
				<li class="pattern-5" data-style="pattern-5" title="pattern-5"></li>
				<li class="pattern-6" data-style="pattern-6" title="pattern-6"></li>
				<li class="pattern-7" data-style="pattern-7" title="pattern-7"></li>
				<li class="pattern-8" data-style="pattern-8" title="pattern-8"></li>
				<li class="pattern-9" data-style="pattern-9" title="pattern-9"></li>
			</ul>
			<ul class="resetAll">
				<li class="btn btn-default btn-sm" title="Reset">Reset All</li>
			</ul>
		</div>
	</div>
	<!-- Color Switcher End -->
	}*
#{/set}

<form id="cropForm" action="/crop" method="post">
	<input type="hidden" id="url" name="url" value="${request.url.urlEncode()}" />
	<input type="hidden" id="x1" name="x1" />
	<input type="hidden" id="x2" name="x2" />
	<input type="hidden" id="y1" name="y1" />
	<input type="hidden" id="y2" name="y2" />
	<input type="hidden" id="imageIdCrop" name="imageId" />
	<input type="hidden" id="type" name="type" value="avatar" />
	<input type="hidden" id="tempCrop" name="objectId" value="#{if event}${event.uuid}#{/if}#{else}${temp}#{/else}"/>
</form>

<div>
<div class="container">
	<div class="row">
	  	<div class="col-md-12">
			<h2 class="btn-margin">
				Settings
				<span class="">
					#{if !edit}
						<a class="btn btn-light-gray btn-sm btn-margin" href="/settings?edit=true"><i class="fa fa-pencil"></i> &{'edit'}</a>
					#{/if}
					#{else}
						<a class="btn btn-light-gray btn-sm btn-margin" href="/settings"><i class="fa fa-times"></i> &{'cancel'}</a>
					#{/else}
				</span>
			</h2>
			
			<form class="form-horizontal" role="form" method="post" action="/settings?edit=true">	
		    

			<div class="row">
				<div class="col-md-9">
					<div class="avatar-container">
					  <img id="image" class="cropper avatar" src="/${user.avatarUrl}">
					</div>
					  <span id="upload-button" class="btn btn-default btn-short" style="position:absolute;left:25px;top:0px"><i class="fa fa-camera"></i></span>
				</div>
				<div class="col-md-3">
					<div class="eg-preview clearfix" style="display:none">
						<div class="avatar-preview preview preview-lg"></div>
						<div class="avatar-preview preview preview-md"></div>
						<div class="avatar-preview preview preview-sm"></div>
						<div class="avatar-preview preview preview-xs"></div>
					</div>
				</div>
			</div>

		    
		    
			<!-- File upload -->
			<div>
				<span id="crop-button" class="btn btn-default " style="display:none"><i class="fa fa-camera"></i> &{'crop'}</span>
				<input type="file" id="upload" name="upload"  accept="image/*" style="display:none">
				<input type="hidden" id="temp" name="temp" value="${params.temp}"/>
				<input type="hidden" id="imageInput" name="image" value="${params.image}"/>
				<input type="hidden" id="imageId" name="imageId"/>
				<div id="progresses" style='margin-top:10px'>
				</div>
				<div class="clearfix"></div>
				<script src="@{'/public/javascripts/upload.js'}" type="text/javascript"></script>	
			</div>
			<!-- Fileupload -->		
			
			

			#{if user.account.currentPlan() != user.account.planRequest}
			<div class="shadow alert alert-info alert-dismissible" role="alert">
			    <button type="button" class="close" data-dismiss="alert"><span aria-hidden="true">&times;</span><span class="sr-only">&{'close'}</span></button>
					&{'change-plan-to'} ${user.account.planRequest} &{'will-be-applied-after'} 
					${account.planRequestFrom.format("dd MMM, yyyy")}
			</div>
			#{/if}					



			<h3>&{'account.account'}</h3>
			<div class="separator-2"></div>
			#{if !edit}
			<dl class="dl-horizontal">
				<dt>&{'account-name'}</dt>
				<dd>${user.account.name} &nbsp;</dd>

				<dt>&{'account-plan'}</dt>
				<dd>
					<span class="label default-bg" style="font-size:0.8em">${user.account.currentPlan()}</span>
				</dd>
				<dt>&{'account-type'}</dt>
				<dd>
					
					#{if user && user.account.type == "publisherReq"}
						${user.account.type} <span class="label label-success" style="font-size:0.8em">&{'waiting-for-approvement'}</span>
					#{/if}
					#{elseif user && user.account.type == "standard"}
						<span class="label label-primary" style="font-size:0.8em">${user.account.type}</span>
						<a href="/settings/request-publisher?url=${request.url.urlEncode()}">&{'become-a-publisher'}</a>
					#{/elseif}
					#{else}
						<span class="label default-bg" style="font-size:0.8em">${user.account.type}</span>
					#{/else}
				</dd>
			</dl>
			#{/if}
			#{else}
			<div class="form-group">
				<label for="name" class="col-sm-2 control-label">&{'account-name'}</label>
			    <div class="col-sm-10">
			      <input type="text" class="form-control" id="accName" placeholder="&{'account.accountName'}" name="accName" value="${params.accName}">
			      <div class="error">#{error 'accName' /}</div>
			    </div>
			</div>
			<div class="form-group">
				<label for="accPlan" class="col-sm-2 control-label">&{'Account Plan'}</label>
			    <div class="col-sm-10">
					<select class="form-control" name="accPlan" id="accPlan">
						<option #{if params.type == "standard"}  selected='selected' #{/if} value="standard">&{'standard'}</option>
						<option #{if params.type == "month"}  selected='selected' #{/if} value="month">&{'monthly-basic'}</option>
						<option #{if params.type == "gold"}  selected='selected' #{/if} value="gold">&{'monthly-premium'}</option>
					</select>
					<div class="error">#{error 'type' /}</div>
			    </div>
			</div>			
			#{/else}

			<br/>
			<h3>&{'user-preferences'}</h3>
			<div class="separator-2"></div>
			#{if !edit}
			<dl class="dl-horizontal">				
				<dt>&{'display-name'}</dt>
				<dd>
					${user.firstName} ${user.lastName}
				</dd>
				
				<dt>&{'password'}</dt>
				<dd>
					<a href="/password">&{'change-your-password'}</a>
				</dd>
				
				<dt>&{'locale'}</dt>
				<dd>
					${user.locale}
				</dd>
				
				<dt>&{'timezone'}</dt>
				<dd>
					#{if user.timezone} #{if user.timezone < 0} + #{/if} ${user.timezone / -60}:00 &{'hrs'} #{/if}
				</dd>			
				
				<dt>&{'email-notifications'}</dt>
				<dd>
					<span class="" rel="tooltip" data-placement="right" data-original-title="&{'enable-or-disable-email-notifications'}">${user.emailNotification}</span>
					 
				</dd>	
				
				<dt>&{'facebook-id'}</dt>
				<dd>
					${user.facebookName}
					<i class="icon-help tip" rel="tooltip" data-placement="right" data-original-title="&{'connect-with-your-facebook-account'}"></i><br/>
					#{if user.facebookId != null}
					<a href="/facebook/clear?${request.url.urlEncode()}">&{'clear-facebook-id'}</a><br/>
					<a target="_blank" href="https://www.facebook.com/add.php?api_key=731388346951866&pages">&{'install-widgr-app-to-your-facebook-page'}</a><br/>
					#{/if}
				</dd>
			</dl>
			#{/if}
			#{else}
			<div class="form-group">
				<label for="firstName" class="col-sm-2 control-label">&{'first-name'}</label>
			    <div class="col-sm-10">
			      <input type="text" class="form-control" id="firstName" placeholder="&{'first-name'}" name="firstName" value="${flash.firstName}">
			      <div class="error">#{error 'firstName' /}</div>
			    </div>
			</div>
			<div class="form-group">
				<label for="lastName" class="col-sm-2 control-label">&{'last-name'}</label>
			    <div class="col-sm-10">
			      <input type="text" class="form-control" id="lastName" placeholder="&{'last-name'}" name="lastName" value="${flash.lastName}">
			      <div class="error">#{error 'lastName' /}</div>
			    </div>
			</div>
			<div class="form-group">
				<label for="locale" class="col-sm-2 control-label">&{'language'}</label>
			    <div class="col-sm-10">
					<select class="form-control" name="locale" id="locale">
						<option #{if flash.locale == "en"}selected='selected'#{/if} value="en">en</option>
						<option #{if flash.locale == "de"}selected='selected'#{/if} value="de">de</option>
					</select>
					<div class="error">#{error 'locale' /}</div>
			    </div>
			</div>						
			<div class="form-group">
				<label for="locale" class="col-sm-2 control-label">&{'timezone'}</label>
			    <div class="col-sm-10">
					<select class="form-control" name="timezone" id="timezone">
						<option #{if params.timezone == "-660"}  selected='selected'#{/if} value="-660">- 11:00 &{'hrs'}</option>
						<option #{if params.timezone == "-600"}  selected='selected'#{/if} value="-600">- 10:00 &{'hrs'}</option>
						<option #{if params.timezone == "-540"}  selected='selected'#{/if} value="-540">- 09:00 &{'hrs'}</option>
						<option #{if params.timezone == "-480"}  selected='selected'#{/if} value="-480">- 08:00 &{'hrs'}</option>
						<option #{if params.timezone == "-420"}  selected='selected'#{/if} value="-420">- 07:00 &{'hrs'}</option>
						<option #{if params.timezone == "-360"}  selected='selected'#{/if} value="-360">- 06:00 &{'hrs'}</option>
						<option #{if params.timezone == "-300"}  selected='selected'#{/if} value="-300">- 05:00 &{'hrs'}</option>
						<option #{if params.timezone == "-240"}  selected='selected'#{/if} value="-240">- 04:00 &{'hrs'}</option>
						<option #{if params.timezone == "-180"}  selected='selected'#{/if} value="-180">- 03:00 &{'hrs'}</option>
						<option #{if params.timezone == "-120"}  selected='selected'#{/if} value="-120">- 02:00 &{'hrs'}</option>
						<option #{if params.timezone == "-60"}  selected='selected'#{/if} value="-60">- 01:00 &{'hrs'}</option>
						<option #{if params.timezone == "0"} selected='selected'#{/if} value="0">&nbsp; 00:00 &{'hrs'}</option>
						<option #{if params.timezone == "60"} selected='selected'#{/if} value="60">+ 01:00 &{'hrs'}</option>
						<option #{if params.timezone == "120"}selected='selected'#{/if} value="120">+ 02:00 &{'hrs'}</option>
						<option #{if params.timezone == "180"}selected='selected'#{/if} value="180">+ 03:00 &{'hrs'}</option>
						<option #{if params.timezone == "240"}selected='selected'#{/if} value="240">+ 04:00 &{'hrs'}</option>
						<option #{if params.timezone == "300"}selected='selected'#{/if} value="300">+ 05:00 &{'hrs'}</option>
						<option #{if params.timezone == "360"}selected='selected'#{/if} value="360">+ 06:00 &{'hrs'}</option>
						<option #{if params.timezone == "420"}selected='selected'#{/if} value="420">+ 07:00 &{'hrs'}</option>
						<option #{if params.timezone == "480"}selected='selected'#{/if} value="480">+ 08:00 &{'hrs'}</option>
						<option #{if params.timezone == "540"}selected='selected'#{/if} value="540">+ 09:00 &{'hrs'}</option>
						<option #{if params.timezone == "600"}selected='selected'#{/if} value="600">+ 10:00 &{'hrs'}</option>
						<option #{if params.timezone == "660"}selected='selected'#{/if} value="660">+ 11:00 &{'hrs'}</option>
						<option #{if params.timezone == "720"}selected='selected'#{/if} value="720">+ 12:00 &{'hrs'}</option>
					</select>
					<div class="error">#{error 'locale' /}</div>
			    </div>
			</div>	
			<div class="form-group">
			<label for="locale" class="col-sm-2 control-label">&{'email-notification'}</label>
			<div class="col-sm-10">
				<label class="radio-inline">
				  <input type="radio" name="emailNotification" id="inlineRadio1" value="true" #{if params.emailNotification == "null" || params.emailNotification == "true"} checked="checked" #{/if}> &{'enabled'}
				</label>
				<label class="radio-inline">
				  <input type="radio" name="emailNotification" id="inlineRadio2" value="false" #{if params.emailNotification == 'false'} checked="checked" #{/if}> &{'disabled'}
				</label>
			</div>				
			</div>						
			<div class="form-group">
				<label for="facebook" class="col-sm-2 control-label">&{'facebook-id'}</label>
				<div class="col-sm-10">
					<input type="hidden" class="form-control" id="facebookId" placeholder="&{'facebook-id'}" name="facebookId" value="${params.facebookId}">
					<input type="text" class="disabled form-control" id="facebookName" name="facebookName" value="${params.facebookName}" readonly>
				  	<script type="text/javascript" src="@{'/public/javascripts/facebook.js'}"></script>
					<script>
					  star.fbClbck = function() {
					      FB.api('/me', function(response) {
					        $("#facebookId").val(response.id);
					        $("#facebookName").val(response.name);
					      });
					  }
					</script>		
					<br/>
					<strong>&{'connect-with-your-facebook-account'}</strong> <div class="fb-login-button" data-max-rows="1" data-scope="public_profile" data-size="large" data-show-faces="false" data-auto-logout-link="false"></div>						
					<div id="fb-root"></div>
				</div>				
			</div>				
			#{/else}			
			
			

			<h3>&{'About You'}</h3>
			<div class="separator-2"></div>
			#{if !edit}
				#{set usr:user /}
				#{include 'userAbout.html' /}
			#{/if}
			#{else}
			<div class="form-group has-feedback">
				<label for="userAbout" class="col-sm-2 control-label">&{'about'}</label>
			    <div class="col-sm-10">
			      <textarea class="form-control" id="userAbout" placeholder="&{'about'}" name="userAbout" rows="10">${params.userAbout}</textarea>
			      <div class="error">#{error 'userAbout' /}</div>
			    </div>
			    #{include 'help.html' /}
			</div>
			<div class="form-group has-feedback">
				<label for="userEducation" class="col-sm-2 control-label">&{'education'}</label>
			    <div class="col-sm-10">
			      <textarea class="form-control" id="userEducation" placeholder="&{'education'}" name="userEducation" rows="10">${params.userEducation}</textarea>
			      <div class="error">#{error 'userEducation' /}</div>
			    </div>
  		        #{include 'help.html' /}
			</div>
			<div class="form-group has-feedback">
				<label for="userExperiences" class="col-sm-2 control-label">&{'experiences'}</label>
			    <div class="col-sm-10">
			      <textarea class="form-control" id="userExperiences" placeholder="&{'experiences'}" name="userExperiences" rows="10">${params.userExperiences}</textarea>
			      <div class="error">#{error 'userExperiences' /}</div>
			    </div>
			    #{include 'help.html' /}
			</div>
			<div class="form-group">
				<label for="website" class="col-sm-2 control-label">&{'website'}</label>
			    <div class="col-sm-10">
			      <input type="text" class="form-control" id="website" placeholder="&{'website'}" name="url" value="${params.url}">
			      <div class="error">#{error 'url' /}</div>
			    </div>
			</div>

			<div class="form-group">
				<label for="facebook" class="col-sm-2 control-label"> &{'facebook'}</label>
			    <div class="col-sm-10">
			      <input type="text" class="form-control" id="facebook" placeholder="&{'facebook'}" name="facebook" value="${params.facebook}">
			      <div class="error">#{error 'facebook' /}</div>
			    </div>
			</div>				

			<div class="form-group">
				<label for="twitter" class="col-sm-2 control-label"> &{'twitter'}</label>
			    <div class="col-sm-10">
			      <input type="text" class="form-control" id="twitter" placeholder="&{'twitter'}" name="twitter" value="${params.twitter}">
			      <div class="error">#{error 'twitter' /}</div>
			    </div>
			</div>				

			<div class="form-group">
				<label for="linkedIn" class="col-sm-2 control-label"> &{'linkedIn'}</label>
			    <div class="col-sm-10">
			      <input type="text" class="form-control" id="linkedIn" placeholder="&{'linkedIn'}" name="linkedIn" value="${params.linkedIn}">
			      <div class="error">#{error 'linkedIn' /}</div>
			    </div>
			</div>				

			<div class="form-group">
				<label for="googlePlus" class="col-sm-2 control-label"> &{'googlePlus'}</label>
			    <div class="col-sm-10">
			      <input type="text" class="form-control" id="googlePlus" placeholder="&{'googlePlus'}" name="googlePlus" value="${params.googlePlus}">
			      <div class="error">#{error 'googlePlus' /}</div>
			    </div>
			</div>				
			#{/else}	
			
			
			<h3>&{'your-calendar'}</h3>
			<div class="separator-2"></div>
			#{if !edit}
			<dl class="dl-horizontal">
				<dt>&{'working-hours'}</dt>
				<dd>${user.workingHourStart} - ${user.workingHourEnd} &{'hrs'}</dd>
				<dt>&{'hidden-days'}</dt>
				<dd>
					#{if user.hiddenDays != null}
 					#{if user.hiddenDays.indexOf("0") >= 0}&{'cal.sunday'}#{/if} 
 					#{if user.hiddenDays.indexOf("1") >= 0}&{'cal.monday'}#{/if} 
 					#{if user.hiddenDays.indexOf("2") >= 0}&{'cal.tuesday'}#{/if} 
 					#{if user.hiddenDays.indexOf("3") >= 0}&{'cal.wednesday'}#{/if} 
 					#{if user.hiddenDays.indexOf("4") >= 0}&{'cal.thursday'}#{/if} 
 					#{if user.hiddenDays.indexOf("5") >= 0}&{'cal.friday'}#{/if} 
 					#{if user.hiddenDays.indexOf("6") >= 0}&{'cal.saturday'}#{/if} 
 					#{/if}
				</dd>
				<dt>&{'sync-with-google'}</dt>
				<dd>
					<div>
						#{if user.googleCalendarId}
						<span class="">&{'google-calendar-sync-with'} ${user.googleCalendarId}</span>
						#{/if}
						<i class="icon-help tip" rel="tooltip" data-placement="right" data-original-title="&{'enable-google-calendar-sync'}"></i>
					</div>
					<div><a href="/google?url=${request.url.urlEncode()}">&{'enable-google-calendar-sync'}</a></div>
					#{if user.googleTokenExpires}
						<div><a href="/google/clear?url=${request.url.urlEncode()}">&{'disable-google-calendar-sync'}</a></div>
					#{/if}
				</dd>
			</dl>
`			
			#{/if}
			#{else}
			<div class="form-group">
				<label for="" class="col-sm-2 control-label">&{'start-of-working-hours'}</label>
			    <div class="col-sm-10">
					<select class="form-control" name="workingHourStart" id="workingHourStart">
						<option #{if params.workingHourStart == "1"} selected='selected'#{/if} value="1">01:00 &{'hrs'}</option>
						<option #{if params.workingHourStart == "2"}selected='selected'#{/if} value="2">02:00 &{'hrs'}</option>
						<option #{if params.workingHourStart == "3"}selected='selected'#{/if} value="3">03:00 &{'hrs'}</option>
						<option #{if params.workingHourStart == "4"}selected='selected'#{/if} value="4">04:00 &{'hrs'}</option>
						<option #{if params.workingHourStart == "5"}selected='selected'#{/if} value="5">05:00 &{'hrs'}</option>
						<option #{if params.workingHourStart == "6"}selected='selected'#{/if} value="6">06:00 &{'hrs'}</option>
						<option #{if params.workingHourStart == "7"}selected='selected'#{/if} value="7">07:00 &{'hrs'}</option>
						<option #{if params.workingHourStart == "8"}selected='selected'#{/if} value="8">08:00 &{'hrs'}</option>
						<option #{if params.workingHourStart == "9"}selected='selected'#{/if} value="9">09:00 &{'hrs'}</option>
						<option #{if params.workingHourStart == "10"}selected='selected'#{/if} value="10">10:00 &{'hrs'}</option>
						<option #{if params.workingHourStart == "11"}selected='selected'#{/if} value="11">11:00 &{'hrs'}</option>
						<option #{if params.workingHourStart == "12"}selected='selected'#{/if} value="12">12:00 &{'hrs'}</option>
						<option #{if params.workingHourStart == "13"}selected='selected'#{/if} value="13">13:00 &{'hrs'}</option>
						<option #{if params.workingHourStart == "14"}selected='selected'#{/if} value="14">14:00 &{'hrs'}</option>
						<option #{if params.workingHourStart == "15"}selected='selected'#{/if} value="15">15:00 &{'hrs'}</option>
						<option #{if params.workingHourStart == "16"}selected='selected'#{/if} value="16">16:00 &{'hrs'}</option>
						<option #{if params.workingHourStart == "17"}selected='selected'#{/if} value="17">17:00 &{'hrs'}</option>
						<option #{if params.workingHourStart == "18"}selected='selected'#{/if} value="18">18:00 &{'hrs'}</option>
						<option #{if params.workingHourStart == "19"}selected='selected'#{/if} value="19">19:00 &{'hrs'}</option>
						<option #{if params.workingHourStart == "20"}selected='selected'#{/if} value="20">20:00 &{'hrs'}</option>
						<option #{if params.workingHourStart == "21"}selected='selected'#{/if} value="21">21:00 &{'hrs'}</option>
						<option #{if params.workingHourStart == "22"}selected='selected'#{/if} value="22">22:00 &{'hrs'}</option>
						<option #{if params.workingHourStart == "23"}selected='selected'#{/if} value="23">23:00 &{'hrs'}</option>
					</select>
					<div class="error">#{error 'workingHourStart' /}</div>
			    </div>
			</div>
			<div class="form-group">
				<label for="" class="col-sm-2 control-label">&{'end-of-working-hours'}</label>
			    <div class="col-sm-10">
					<select class="form-control" name="workingHourEnd" id="workingHourEnd">
						<option #{if params.workingHourEnd == "1"} selected='selected'#{/if} value="1">01:00 &{'hrs'}</option>
						<option #{if params.workingHourEnd == "2"}selected='selected'#{/if} value="2">02:00 &{'hrs'}</option>
						<option #{if params.workingHourEnd == "3"}selected='selected'#{/if} value="3">03:00 &{'hrs'}</option>
						<option #{if params.workingHourEnd == "4"}selected='selected'#{/if} value="4">04:00 &{'hrs'}</option>
						<option #{if params.workingHourEnd == "5"}selected='selected'#{/if} value="5">05:00 &{'hrs'}</option>
						<option #{if params.workingHourEnd == "6"}selected='selected'#{/if} value="6">06:00 &{'hrs'}</option>
						<option #{if params.workingHourEnd == "7"}selected='selected'#{/if} value="7">07:00 &{'hrs'}</option>
						<option #{if params.workingHourEnd == "8"}selected='selected'#{/if} value="8">08:00 &{'hrs'}</option>
						<option #{if params.workingHourEnd == "9"}selected='selected'#{/if} value="9">09:00 &{'hrs'}</option>
						<option #{if params.workingHourEnd == "10"}selected='selected'#{/if} value="10">10:00 &{'hrs'}</option>
						<option #{if params.workingHourEnd == "11"}selected='selected'#{/if} value="11">11:00 &{'hrs'}</option>
						<option #{if params.workingHourEnd == "12"}selected='selected'#{/if} value="12">12:00 &{'hrs'}</option>
						<option #{if params.workingHourEnd == "13"}selected='selected'#{/if} value="13">13:00 &{'hrs'}</option>
						<option #{if params.workingHourEnd == "14"}selected='selected'#{/if} value="14">14:00 &{'hrs'}</option>
						<option #{if params.workingHourEnd == "15"}selected='selected'#{/if} value="15">15:00 &{'hrs'}</option>
						<option #{if params.workingHourEnd == "16"}selected='selected'#{/if} value="16">16:00 &{'hrs'}</option>
						<option #{if params.workingHourEnd == "17"}selected='selected'#{/if} value="17">17:00 &{'hrs'}</option>
						<option #{if params.workingHourEnd == "18"}selected='selected'#{/if} value="18">18:00 &{'hrs'}</option>
						<option #{if params.workingHourEnd == "19"}selected='selected'#{/if} value="19">19:00 &{'hrs'}</option>
						<option #{if params.workingHourEnd == "20"}selected='selected'#{/if} value="20">20:00 &{'hrs'}</option>
						<option #{if params.workingHourEnd == "21"}selected='selected'#{/if} value="21">21:00 &{'hrs'}</option>
						<option #{if params.workingHourEnd == "22"}selected='selected'#{/if} value="22">22:00 &{'hrs'}</option>
						<option #{if params.workingHourEnd == "23"}selected='selected'#{/if} value="23">23:00 &{'hrs'}</option>
					</select>
					<div class="error">#{error 'workingHourStart' /}</div>
			    </div>
			</div>
			<div class="form-group">
				<label for="" class="col-sm-2 control-label">&{'hidden-days'}</label>
			    <div class="col-sm-10" style="position:relative;top:7px;">
			    	<label for="hiddenDays0">
				    	<input type="checkbox" name="hiddenDays" value="0" id="hiddenDays0" #{if params.hiddenDays != null && params.hiddenDays.indexOf("0") >= 0}checked='checked'#{/if}> &{'cal.sunday'} &nbsp;
			    	</label>
			    	<label for="hiddenDays1">
				    	<input type="checkbox" name="hiddenDays" value="1" id="hiddenDays1" #{if params.hiddenDays != null && params.hiddenDays.indexOf("1") >= 0}checked='checked'#{/if}> &{'cal.monday'} &nbsp;
			    	</label>
			    	<label for="hiddenDays2">
				    	<input type="checkbox" name="hiddenDays" value="2" id="hiddenDays2" #{if params.hiddenDays != null && params.hiddenDays.indexOf("2") >= 0}checked='checked'#{/if}> &{'cal.tuesday'} &nbsp;
			    	</label>
			    	<label for="hiddenDays3">
				    	<input type="checkbox" name="hiddenDays" value="3" id="hiddenDays3" #{if params.hiddenDays != null && params.hiddenDays.indexOf("3") >= 0}checked='checked'#{/if}> &{'cal.wednesday'} &nbsp;
			    	</label>
			    	<label for="hiddenDays4">
				    	<input type="checkbox" name="hiddenDays" value="4" id="hiddenDays4" #{if params.hiddenDays != null && params.hiddenDays.indexOf("4") >= 0}checked='checked'#{/if}> &{'cal.thursday'} &nbsp;
			    	</label>
			    	<label for="hiddenDays5">
				    	<input type="checkbox" name="hiddenDays" value="5" id="hiddenDays5" #{if params.hiddenDays != null && params.hiddenDays.indexOf("5") >= 0}checked='checked'#{/if}> &{'cal.friday'} &nbsp;
			    	</label>
			    	<label for="hiddenDays6">
				    	<input type="checkbox" name="hiddenDays" value="6" id="hiddenDays6" #{if params.hiddenDays != null && params.hiddenDays.indexOf("6") >= 0}checked='checked'#{/if}> &{'cal.saturday'}
			    	</label>
			    </div>
				<div class="error">#{error 'hiddenDays' /}</div>
			</div>			
			
			<div class="form-group">
				<label for="" class="col-sm-2 control-label">&{'google-calendar-id'}</label>
			    <div class="col-sm-10">
					<select class="form-control" name="googleCalendarId" id="googleCalendarId">
						#{if calendars}
						#{list items:calendars, as:'item'}
							<option #{if user.googleCalendarId == item.id} selected='selected'#{/if} value="${item.id}">${item.summary} #{if item.primary}(&{'primary'})#{/if}</option>
						#{/list}
						#{/if}
					</select>
					<div class="error">#{error 'workingHourStart' /}</div>
			    </div>
			</div>
			#{/else}
					






			<br/>
			<a id="paypal"></a>
			<h3>&{'paypal-account'}</h3>
			<div class="separator-2"></div>
			#{if !edit}
			<dl class="dl-horizontal">
				<dt>&{'paypal-account'}</dt>
				<dd>
					${user.account.paypalAccount}
					<i class="icon-help tip" rel="tooltip" data-placement="right" data-original-title="&{'paypal-info'}"></i>
				</dd>
				<dt>&{'account.currency'}</dt>
				<dd>${user.account.currency} &nbsp;</dd>
			</dl>
			#{/if}
			#{else}
			<div class="form-group">
				<label for="paypal" class="col-sm-2 control-label">&{'paypal-account'}</label>
			    <div class="col-sm-10">
			      <input type="text" class="form-control" id="paypal" placeholder="&{'paypal-account'}" name="paypal" value="${params.paypal}">
			      <div class="error">#{error 'paypal' /}</div>
			    </div>
			</div>
			<div class="form-group">
				<label for="currency" class="col-sm-2 control-label">&{'currency'}</label>
			    <div class="col-sm-10">
					<select class="form-control" name="currency" id="currency">
						<option #{if params.currency == "USD"}selected='selected'#{/if} value="USD">USD</option>
						<option #{if params.currency == "EUR"}selected='selected'#{/if} value="EUR">EUR</option>
						<option #{if params.currency == "CHF"}selected='selected'#{/if} value="SEK">CHF</option>
						<option #{if params.currency == "GBP"}selected='selected'#{/if} value="GBP">GBP</option>
						<option #{if params.currency == "AUD"}selected='selected'#{/if} value="AUD">AUD</option>
						<option #{if params.currency == "CAD"}selected='selected'#{/if} value="CAD">CAD</option>
						<option #{if params.currency == "JPY"}selected='selected'#{/if} value="JPY">JPY</option>
						<option #{if params.currency == "CZK"}selected='selected'#{/if} value="CZK">CZK</option>
						<option #{if params.currency == "BRL"}selected='selected'#{/if} value="BRL">BRL</option>
						<option #{if params.currency == "DKK"}selected='selected'#{/if} value="DKK">DKK</option>
						<option #{if params.currency == "NOK"}selected='selected'#{/if} value="NOK">NOK</option>
						<option #{if params.currency == "NZD"}selected='selected'#{/if} value="NZD">NZD</option>
						<option #{if params.currency == "PLN"}selected='selected'#{/if} value="SEK">PLN</option>
						<option #{if params.currency == "SEK"}selected='selected'#{/if} value="SEK">SEK</option>
					</select>
					<div class="error">#{error 'currency' /}</div>
			    </div>
			</div>			
			#{/else}
			
			
			
			
			
			
			
			
			
			*{
			<br/>
			<h3>&{'outgoing-email'}</h3>
			<div class="separator-2"></div>
			<div class="alert alert-success alert-dismissable" style="display:none;" id="email-success"></div>
			<div class="alert alert-danger alert-dismissable" style="display:none;" id="email-danger"></div>
			#{if !edit}
			<dl class="dl-horizontal">
				<dt>Smtp host</dt>
				<dd>${user.account.smtpHost} &nbsp;</dd>
				
				#{if user.account.smtpHost == null || user.account.smtpHost != "DEFAULT"}
				<dt>Smtp port</dt>
				<dd>${user.account.smtpPort} &nbsp;</dd>
				<dt>&{'account.account'}</dt>
				<dd>${user.account.smtpAccount} &nbsp;</dd>
				<dt>&{'account.protocol'}</dt>
				<dd>${user.account.smtpProtocol} &nbsp;</dd>
				<dt></dt>
				#{/if}
				<dd>
					<a style="cursor:pointer" id="test-email">&{'email.test.link'}</a><span class="spinner-small spinner-test"></span> |
					<a href="/settings/smtp/reset?url=${request.url.urlEncode()}">Reset to default</a>
				</dd>
			</dl>
				<script>
					$("#test-email").click(function(){
			            $(".spinner-test").show();
					    $.ajax({
					        type: "GET",
					        url: "/test-email",
					        success: function(data) {
					            $("#email-success").html(data.response);
					            $("#email-success").show();
					            $(".spinner-test").hide();
						    },
					        error: function(data) {
					            console.log(data);
					            $("#email-danger").html(data.responseText);
					            $("#email-danger").show();
					            $(".spinner-test").hide();
						    },
					        contentType: "application/json"
					    });
					});
				</script>
			#{/if}
			#{else}
			<div class="form-group">
				<label for="smtpHost" class="col-sm-2 control-label">Smtp host</label>
			    <div class="col-sm-10">
			      <input type="text" class="form-control" id="smtpHost" placeholder="Smtp host" name="smtpHost" value="${flash.smtpHost}">
			      <div class="error">#{error 'smtpHost' /}</div>
			    </div>
			</div>
			<div class="form-group">
				<label for="smtpPort" class="col-sm-2 control-label">Smtp port</label>
			    <div class="col-sm-10">
			      <input type="text" class="form-control" id="smtpPort" placeholder="Smtp port" name="smtpPort" value="${flash.smtpPort}">
			      <div class="error">#{error 'smtpPort' /}</div>
			    </div>
			</div>
			<div class="form-group">
				<label for="smtpPort" class="col-sm-2 control-label">&{'account.account'}</label>
			    <div class="col-sm-10">
			      <input type="text" class="form-control" id="smtpAccount" placeholder="&{'account.account'}" name="smtpAccount" value="${flash.smtpAccount}">
			      <div class="error">#{error 'smtpAccount' /}</div>
			    </div>
			</div>
			<div class="form-group">
				<label for="smtpPort" class="col-sm-2 control-label">&{'password'}</label>
			    <div class="col-sm-10">
			      <input type="password" class="form-control" id="smtpPassword" placeholder="&{'password'}" name="smtpPassword" value="${flash.smtpPassword}">
			      <div class="error">#{error 'smtpPassword' /}</div>
			    </div>
			</div>
			<div class="form-group">
				<label for="smtpProtocol" class="col-sm-2 control-label">&{'account.protocol'}</label>
			    <div class="col-sm-10">
					<select class="form-control" name="smtpProtocol" id="smtpProtocol">
						<option #{if flash.smtpProtocol == "SMTP"}selected='selected'#{/if} value="SMTP">SMTP</option>
						<option #{if flash.smtpProtocol == "SMTPS"}selected='selected'#{/if} value="SMTPS">SMTPS</option>
					</select>
					<div class="error">#{error 'smtpProtocol' /}</div>
			    </div>
			</div>			
			#{/else}
			}*

			
			*{
			<br/>
			<h3>Website Embedding</h3>
			<div class="separator-2"></div>
			<dl class="dl-horizontal">
				<dt>&{'account.viaIframe'}</dt>
				<dd style="margin-bottom:30px;">
					<textarea class="form-control" rows="2" ><iframe style="width:100%;height:100%;" frameborder="0" src="${baseUrl}/public/calendar?id=${user.uuid}" seamless></iframe></textarea>
				</dd>
				<dt>&{'account.viaLink'}</dt>
				<dd><textarea class="form-control" rows="1" >${baseUrl}/public/calendar?id=${user.uuid}</textarea></dd>
			</dl>
			}*

			<br/>
			#{if edit}
			<div class="form-group">
				<div class="col-sm-12">
					<div class="pull-right">
						<button type="submit" class="btn btn-default">&{'save'}</button>
						<a href="/Accounts/account" class="btn btn-light-gray">&{'cancel'}</a>
					</div>
				</div>
			</div>
			#{/if}
		</form>
		</div>
	</div>
</div>
</div>


